Modèle des opérations : Receptacle


Opération : Receptacle::rentrerCode(n:number)
Acteur du MdE : PaveNum
CdU : Réception d’une commande
Messages : 
* porteLaterale::{debloquerPorte}
* panneauAffichage::{msgModifierCode, msgCodeIncorrect}
* diode::{diodeVerte, diodeRouge}
Pré :
Post :
if n = self.codeAdmin then
self.mode = EnumMode::Admin
and
self.porteLaterale^debloquerPorte()
and
self.panneauAffichage^msgModifierCode(true)
and
self.diode^diodeVerte() 


else if n = self.codeUser then 
self.mode = EnumMode::User
and
self.porteLaterale^debloquerPorte()
and
self.panneauAffichage^msgModifierCode(true)
and
self.diode^diodeVerte()
else
self.panneauAffichage^msgCodeIncorrect(true)
and
self.diode^diodeRouge()
        


Opération : Receptacle::modifierCode(n:number)
Acteur du MdE : PaveNum
CdU : Réception d’une commande
Messages : 
* panneauAffichage::{msgModifiercode}
Pré :        
not(self.porteLaterale.closedState)
Post :
        if self.mode == EnumMode::Admin then
                self.codeAdmin = n
and
self.panneauAffichage^msgModifierCode(false)
        if self.mode == EnumMode::User then
                self.codeUser = n
and
self.panneauAffichage^msgModifierCode(false)


                
                


Opération : Receptacle::verificationBadge(b:badge)
Acteur du MdE : capteurBadge
CdU : Réception d’une commande
Messages : 
* porteLaterale::{debloquerPorte}
* panneauAffichage::{msgModifierCode, msgBadgeIncorrect}
* diode::{diodeVerte, diodeRouge}
Pré :
Post : 
if b == self.idBadgeAdmin then
self.mode = EnumMode::Admin
and
self.porteLaterale^debloquerPorte()
and
self.panneauAffichage^msgModifierCode(true)
and
self.diode^diodeVerte() 
else if b == self.idBadgeUser then 
self.mode = EnumMode::User
and
self.porteLaterale^debloquerPorte()
and
self.panneauAffichage^msgModifierCode(true)
and
self.diode^diodeVerte()
else
self.panneauAffichage^msgBadgeIncorrect(true)
and
self.diode^diodeRouge()
        


Opération : Receptacle::verificationColis(idDestinataire:IdRFID)
Acteur du MdE : systemeDrone
CdU : Livrer une commande
Messages : 
* systemeDrone::{colisCorrect}
Pré :
Post :
        if self.id == idDestinataire then
                self.systemeDrone^colisCorrect(true)
        else
                self.systemeDrone^colisCorrect(false)


Opération : Receptacle::ouverturePanneau()
Acteur du MdE : systemeDrone
CdU : Livrer une commande
Messages : 
* panneauSuperieur::{ouvrirPanneau}
* systemeDrone::{sendConfirmation}
Pré : 
not(self.panneauSuperieur.lockedState)
Post :
        if self.panneauSuperieur^ouvrirPanneau() then
                self.panneauSuperieur.closedState = false
                and
                self.systemeDrone^sendConfirmation(ConfirmMsg::PanneauOuvert)
        
                


Opération : Receptacle::fermeturePanneau()
Acteur du MdE : systemeDrone
CdU : Livrer une commande
Messages : 
* panneauSuperieur::{fermerPanneau}
* systemeDrone::{sendConfirmation}
Pré :
 not(self.panneauSuperieur.lockedState)
Post :
        if self.panneauSuperieur^fermerPanneau() then
                self.panneauSuperieur.closedState = true
                and
                self.systemeDrone^sendConfirmation(ConfirmMsg::PanneauFerme)


Opération : Receptacle::timeoutVerification()
Acteur du MdE : systemeDrone
CdU : Livrer une commande
Messages : 
* PanneauAffichage{msgHorsService}
Pré :
Post :
        self.panneauAffichage^msgHorsService(true)




Opération : Receptacle::dronePresent()
Acteur du MdE : supportDrone
CdU : Livrer une commande
Messages : 
* supportDrone::{bloquerDrone}
Pré : not(self.supportDrone.lockedState)
Post :
        self.supportDrone^bloquerDrone(true)
        and
        self.supportDrone.lockedState = true






Opération : Receptacle::porteFerme()
Acteur du MdE : PorteLaterale
CdU : Livrer une commande
Messages : 
* porteLaterale::{bloquerPorte}
Pré :
Post :
        self.porteLaterale^bloquerporte()
        and
        self.porteLaterale.lockedState = true






Opération : Receptacle::panneauFerme()
Acteur du MdE : PanneauSuperieur
CdU : Livrer une commande
Messages : 
* panneauSuperieur::{bloquerPanneau}
Pré :
Post :
        self.panneauSuperieur^bloquerPanneau()
        and
        self.panneauSuperieur.lockedState = true






Opération : Receptacle::colisPresent()
Acteur du MdE : capteurRFID
CdU : Livrer une commande
Messages : 
* systemeClient::{signalerReception}
Pré :
Post :
        Self.systemeClient^signalerReception()