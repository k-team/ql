\input{../entete}
\usepackage{listings}
\setlength{\parindent}{0pt}

\newcommand{\OMInput}[1]{
    \def \OMLabel {#1}
    \input{partials/#1}
}

\newenvironment{OM}[2]{
    \def \OMId {#1}
    \OMName{#2}
}{
}

\newcommand{\OMName}[1]{
    \section{#1}
}

\newenvironment{OMOperation}[3]{
    \subsection{#1}

    {\large Description de l'opération $\OMId::#1$ : \\}

    \textbf{Acteur du MdE :} #2 \\
    \textbf{Cas d'utilisation :} #3 \\
}{
}

\newcommand{\OMMessagesBegin}{\textbf{Messages :}}
\newcommand{\OMMessagesEnd}{}
\newcommand{\OMNoMessages}{\OMMessagesBegin aucuns \\}
\newenvironment{OMMessages}{
    \OMMessagesBegin
    \begin{itemize}
}{
    \end{itemize}
    \OMMessagesEnd
}

\newcommand{\OMMessage}[2]{
    \item[*] {#1}::\{#2\}
}

\newcommand{\OMPreBegin}{\textbf{Pré-conditions :}}
\newcommand{\OMPreEnd}{}
\newcommand{\OMNoPre}{\OMPreBegin aucunes \\}
\lstnewenvironment{OMPre}[1][]{
    \OMPreBegin
}{
    \OMPreEnd
}

\newcommand{\OMPostBegin}{\textbf{Post-conditions :}}
\newcommand{\OMPostEnd}{}
\newcommand{\OMNoPost}{\OMPostBegin aucunes \\}
\lstnewenvironment{OMPost}{
    \OMPostBegin
    \lstset{breaklines=true}
}{
    \OMPostEnd
}

\begin{document}

\Document{Modèles des opérations}

\OMInput{balance}
\OMInput{receptacle}
\OMInput{ronde}
\OMInput{drone}
\OMInput{web}

\end{document}
